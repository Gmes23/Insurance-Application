{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { InputText } from 'primereact/inputtext';\nimport { Growl } from 'primereact/growl';\nimport { Button } from 'primereact/button';\nimport Layout from '../components/Layout';\nexport var UserService = /*#__PURE__*/function () {\n  function UserService() {\n    _classCallCheck(this, UserService);\n  }\n\n  _createClass(UserService, [{\n    key: \"getAllUsers\",\n    value: function getAllUsers() {\n      return fetch('http://localhost:4000/user', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        return data;\n      }); // .then((data) => {console.log(data)});\n    }\n  }]);\n\n  return UserService;\n}();\n\nvar DataTableEditDemo2 = /*#__PURE__*/function (_React$Component) {\n  _inherits(DataTableEditDemo2, _React$Component);\n\n  var _super = _createSuper(DataTableEditDemo2);\n\n  function DataTableEditDemo2() {\n    var _this;\n\n    _classCallCheck(this, DataTableEditDemo2);\n\n    _this = _super.call(this);\n    _this.state = {\n      users: []\n    };\n    _this.clonedUsers = {};\n    _this.userservice = new UserService();\n    _this.editorForRowEditing = _this.editorForRowEditing.bind(_assertThisInitialized(_this));\n    _this.onRowEditorValidator = _this.onRowEditorValidator.bind(_assertThisInitialized(_this));\n    _this.onRowEditInit = _this.onRowEditInit.bind(_assertThisInitialized(_this));\n    _this.onRowEditSave = _this.onRowEditSave.bind(_assertThisInitialized(_this));\n    _this.onRowEditCancel = _this.onRowEditCancel.bind(_assertThisInitialized(_this)); //  Delete Method \n\n    _this.actionTemplate = _this.actionTemplate.bind(_assertThisInitialized(_this));\n    _this.handleDelete = _this.handleDelete.bind(_assertThisInitialized(_this)); // Checks if what type of Liability User has\n\n    _this.checkPrimaryAL = _this.checkPrimaryAL.bind(_assertThisInitialized(_this));\n    _this.checkPrimaryEL = _this.checkPrimaryEL.bind(_assertThisInitialized(_this));\n    _this.checkPrimaryGL = _this.checkPrimaryGL.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(DataTableEditDemo2, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.userservice.getAllUsers().then(function (data) {\n        return _this2.setState({\n          user: data\n        });\n      });\n    }\n    /* Row Editing */\n\n  }, {\n    key: \"onEditorValueChangeForRowEditing\",\n    value: function onEditorValueChangeForRowEditing(props, value) {\n      var updatedUsers = _toConsumableArray(props.value);\n\n      updatedUsers[props.rowIndex][props.field] = value;\n      this.setState({\n        users: updatedUsers\n      });\n    }\n  }, {\n    key: \"editorForRowEditing\",\n    value: function editorForRowEditing(props, field) {\n      var _this3 = this;\n\n      return __jsx(InputText, {\n        type: \"text\",\n        value: props.rowData[field],\n        onChange: function onChange(e) {\n          return _this3.onEditorValueChangeForRowEditing(props, e.target.value);\n        }\n      });\n    }\n  }, {\n    key: \"onRowEditorValidator\",\n    value: function onRowEditorValidator(rowData) {\n      console.log(rowData, 'rowdataonroweditovalidto');\n      var value = rowData['first_name'];\n      return value.length > 0;\n    }\n  }, {\n    key: \"onRowEditInit\",\n    value: function onRowEditInit(event) {\n      this.clonedUsers[event.data.vin] = _objectSpread({}, event.data);\n    }\n  }, {\n    key: \"onRowEditSave\",\n    value: function onRowEditSave(event) {\n      var _this4 = this;\n\n      if (this.onRowEditorValidator(event.data)) {\n        console.log(event.data.id, ' this event data ');\n        delete this.clonedUsers[event.data.vin];\n        fetch('http://localhost:4000/user/' + event.data.id, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(event.data)\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          return _this4.setState({\n            users: data\n          });\n        });\n        this.growl.show({\n          severity: 'success',\n          summary: 'Success',\n          detail: 'Car is updated'\n        });\n      } else {\n        this.growl.show({\n          severity: 'error',\n          summary: 'Error',\n          detail: 'Brand is required'\n        });\n      }\n    }\n  }, {\n    key: \"onRowEditCancel\",\n    value: function onRowEditCancel(event) {\n      var users = _toConsumableArray(this.state.users);\n\n      users[event.index] = this.clonedUsers[event.data.vin];\n      delete this.clonedUsers[event.data.vin];\n      this.setState({\n        users: users\n      });\n    } // These handle the Delete method \n\n  }, {\n    key: \"actionTemplate\",\n    value: function actionTemplate(rowData, column) {\n      var _this5 = this;\n\n      return __jsx(\"div\", null, __jsx(Button, {\n        type: \"button\",\n        icon: \"pi pi-times\",\n        className: \"p-button-danger\",\n        style: {\n          marginRight: '.5em'\n        },\n        onClick: function onClick(e) {\n          return _this5.handleDelete(rowData, e);\n        }\n      }));\n    }\n  }, {\n    key: \"handleDelete\",\n    value: function handleDelete(rowData, e) {\n      e.preventDefault();\n      var userId = rowData.id;\n      fetch('http://localhost:4000/user/' + userId, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(this.setState({\n        users: rowData\n      }));\n    } //  Ternary function for liabilities\n\n  }, {\n    key: \"checkPrimaryAL\",\n    value: function checkPrimaryAL(rowData, column) {\n      console.log(rowData.primary_al, 'rowDAtaeqweq');\n      return rowData.primary_al ? __jsx(\"i\", {\n        className: \"pi pi-check\",\n        style: {\n          'fontSize': '3em',\n          'color': 'green'\n        }\n      }) : __jsx(\"i\", {\n        className: \"pi pi-times\",\n        style: {\n          'fontSize': '3em',\n          'color': 'crimson'\n        }\n      });\n    }\n  }, {\n    key: \"checkPrimaryEL\",\n    value: function checkPrimaryEL(rowData, column) {\n      return rowData.primary_el ? __jsx(\"i\", {\n        className: \"pi pi-check\",\n        style: {\n          'fontSize': '3em',\n          'color': 'green'\n        }\n      }) : __jsx(\"i\", {\n        className: \"pi pi-times\",\n        style: {\n          'fontSize': '3em',\n          'color': 'crimson'\n        }\n      });\n    }\n  }, {\n    key: \"checkPrimaryGL\",\n    value: function checkPrimaryGL(rowData, column) {\n      return rowData.primary_gl ? __jsx(\"i\", {\n        className: \"pi pi-check\",\n        style: {\n          'fontSize': '3em',\n          'color': 'green'\n        }\n      }) : __jsx(\"i\", {\n        className: \"pi pi-times\",\n        style: {\n          'fontSize': '3em',\n          'color': 'crimson'\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      console.log(this.state, 'this state');\n      return __jsx(Layout, null, __jsx(\"div\", null, __jsx(\"div\", {\n        className: \"content-section introduction\"\n      }, __jsx(\"div\", {\n        className: \"feature-intro\"\n      }, __jsx(\"h1\", null, \"DataTable - Edit\"), __jsx(\"p\", null, \"User Data\"))), __jsx(\"div\", {\n        className: \"content-section implementation\"\n      }, __jsx(Growl, {\n        ref: function ref(el) {\n          return _this6.growl = el;\n        }\n      }), __jsx(\"h3\", null, \"Applicant Table\"), __jsx(DataTable, {\n        value: this.state.user,\n        editMode: \"row\",\n        rowEditorValidator: this.onRowEditorValidator,\n        onRowEditInit: this.onRowEditInit,\n        onRowEditSave: this.onRowEditSave,\n        onRowEditCancel: this.onRowEditCancel\n      }, __jsx(Column, {\n        field: \"first_name\",\n        header: \"First Name\",\n        editor: function editor(props) {\n          return _this6.editorForRowEditing(props, 'first_name');\n        },\n        style: {\n          height: '3.5em'\n        }\n      }), __jsx(Column, {\n        field: \"last_name\",\n        header: \"Last Name\",\n        editor: function editor(props) {\n          return _this6.editorForRowEditing(props, 'last_name');\n        },\n        style: {\n          height: '3.5em'\n        }\n      }), __jsx(Column, {\n        field: \"email_address\",\n        header: \"Email Address\",\n        editor: function editor(props) {\n          return _this6.editorForRowEditing(props, 'email_address');\n        },\n        style: {\n          height: '3.5em'\n        }\n      }), __jsx(Column, {\n        field: \"phone_number\",\n        header: \"Phone Number\",\n        editor: function editor(props) {\n          return _this6.editorForRowEditing(props, 'phone_number');\n        },\n        style: {\n          height: '3.5em'\n        }\n      }), __jsx(Column, {\n        field: \"effective_date\",\n        header: \"Effective Date\",\n        editor: function editor(props) {\n          return _this6.editorForRowEditing(props, 'effective_date');\n        },\n        style: {\n          height: '3.5em'\n        }\n      }), __jsx(Column, {\n        field: \"status\",\n        header: \"Status\",\n        editor: function editor(props) {\n          return _this6.editorForRowEditing(props, 'status');\n        },\n        style: {\n          height: '3.5em'\n        }\n      }), __jsx(Column, {\n        field: \"primary_al\",\n        header: \"Auto Liability\",\n        body: this.checkPrimaryAL,\n        editor: function editor(props) {\n          return _this6.editorForRowEditing(props, 'primary_al');\n        },\n        style: {\n          height: '3.5em'\n        }\n      }), __jsx(Column, {\n        field: \"primary_gl\",\n        header: \"General Liability\",\n        body: this.checkPrimaryEL,\n        editor: function editor(props) {\n          return _this6.editorForRowEditing(props, 'primary_gl');\n        },\n        style: {\n          height: '3.5em'\n        }\n      }), __jsx(Column, {\n        field: \"primary_el\",\n        header: \"Primary Liability\",\n        body: this.checkPrimaryGL,\n        editor: function editor(props) {\n          return _this6.editorForRowEditing(props, 'primary_el');\n        },\n        style: {\n          height: '3.5em'\n        }\n      }), __jsx(Column, {\n        header: \"Delete Applicant\",\n        body: this.actionTemplate,\n        style: {\n          textAlign: 'center',\n          width: '8em'\n        }\n      }), __jsx(Column, {\n        header: \"Edit\",\n        rowEditor: true,\n        style: {\n          'width': '70px',\n          'textAlign': 'center'\n        }\n      })))));\n    }\n  }]);\n\n  return DataTableEditDemo2;\n}(React.Component);\n\nexport default DataTableEditDemo2;","map":null,"metadata":{},"sourceType":"module"}